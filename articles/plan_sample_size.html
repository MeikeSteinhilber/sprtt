<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sample Size Planning for Sequential ANOVAs • sprtt</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sample Size Planning for Sequential ANOVAs">
<meta name="description" content="This vignette describes how to plan sample sizes for sequential ANOVAs using simulation-based approaches.
">
<meta property="og:description" content="This vignette describes how to plan sample sizes for sequential ANOVAs using simulation-based approaches.
">
<meta property="og:image" content="https://meikesteinhilber.github.io/sprtt/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sprtt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/usage_sprtt.html">How to use the sprtt package</a></li>
    <li><a class="dropdown-item" href="../articles/use_case.html">Use Case</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Sequential Tests</h6></li>
    <li><a class="dropdown-item" href="../articles/t_test.html">Sequential t-Test</a></li>
    <li><a class="dropdown-item" href="../articles/one_way_anova.html">Sequential One-Way ANOVA</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Further Topics</h6></li>
    <li><a class="dropdown-item" href="../articles/sprts.html">SPRTs</a></li>
    <li><a class="dropdown-item" href="../articles/plan_sample_size.html">Sample Size Planning for Sequential ANOVAs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MeikeSteinhilber/sprtt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sample Size Planning for Sequential ANOVAs</h1>
                        <h4 data-toc-skip class="author">Meike
Snijder-Steinhilber</h4>
            
            <h4 data-toc-skip class="date">2026-01-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MeikeSteinhilber/sprtt/blob/develop/vignettes/plan_sample_size.Rmd" class="external-link"><code>vignettes/plan_sample_size.Rmd</code></a></small>
      <div class="d-none name"><code>plan_sample_size.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<div class="section level3">
<h3 id="why-sample-size-planning-matters">Why Sample Size Planning Matters<a class="anchor" aria-label="anchor" href="#why-sample-size-planning-matters"></a>
</h3>
<p>Determining an appropriate sample size is a critical step in
designing any study. Too few participants may result in insufficient
statistical power to detect meaningful effects, while collecting more
data than necessary wastes resources and participant time. For
sequential designs—where data are analyzed continuously as they
arrive—sample size planning becomes even more important because
researchers need to balance the efficiency gains of early stopping
against the risk of premature conclusions.</p>
</div>
<div class="section level3">
<h3 id="sequential-anovas">Sequential ANOVAs<a class="anchor" aria-label="anchor" href="#sequential-anovas"></a>
</h3>
<p>Traditional ANOVAs require researchers to collect all data before
conducting a single hypothesis test. Sequential ANOVAs, by contrast,
allow for continuous monitoring of the data as they accumulate. This
approach offers several advantages:</p>
<ul>
<li>
<strong>Early stopping for efficacy:</strong> If a clear effect
emerges, data collection can stop earlier than planned, saving time and
resources.</li>
<li>
<strong>Early stopping for futility:</strong> If the data strongly
suggest no effect, researchers can terminate the study early rather than
continuing to collect unhelpful data.</li>
<li>
<strong>Flexibility:</strong> Researchers can make informed
decisions throughout data collection rather than waiting until the
end.</li>
</ul>
<p>However, these benefits come with a cost: sequential testing inflates
the Type I error rate if not properly controlled. The Sequential
Probability Ratio Test (SPRT) framework implemented in
<strong>sprtt</strong> addresses this issue by maintaining the desired
alpha level throughout the sequential process.</p>
</div>
<div class="section level3">
<h3 id="the-challenge-of-sample-size-planning">The Challenge of Sample Size Planning<a class="anchor" aria-label="anchor" href="#the-challenge-of-sample-size-planning"></a>
</h3>
<p>Unlike traditional ANOVAs where power analysis formulas are
well-established, sequential designs require simulation-based approaches
to determine sample sizes. This is because:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Complex stopping rules:</strong> Sequential tests can stop
at any point, making analytical solutions intractable.</li>
<li>
<strong>Multiple comparisons:</strong> Continuous monitoring
involves many implicit tests, affecting power calculations.</li>
<li>
<strong>Trade-offs:</strong> The maximum sample size must balance
the benefits of early stopping against the risk of requiring more
participants than a traditional design.</li>
</ol>
<p>The <strong>sprtt</strong> package solves this problem by providing
pre-computed simulation results that allow researchers to quickly
determine appropriate sample sizes for their sequential ANOVA
designs.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="overview-of-the-sample-size-planning-system">Overview of the Sample Size Planning System<a class="anchor" aria-label="anchor" href="#overview-of-the-sample-size-planning-system"></a>
</h2>
<div class="section level3">
<h3 id="the-plan_sample_size-function">The <code>plan_sample_size()</code> Function<a class="anchor" aria-label="anchor" href="#the-plan_sample_size-function"></a>
</h3>
<p>The <code><a href="../reference/plan_sample_size.html">plan_sample_size()</a></code> function is the main interface
for sample size planning. It generates an interactive HTML report
containing:</p>
<ul>
<li>
<strong>Recommended maximum sample size</strong> for your
design</li>
<li>
<strong>Expected sample size</strong> (average across
simulations)</li>
<li>
<strong>Probability of early stopping</strong> at various sample
sizes</li>
<li>
<strong>Power curves</strong> showing how statistical power
accumulates as data are collected</li>
<li>
<strong>Comparison to traditional ANOVA</strong> sample size
requirements</li>
</ul>
<p>The function works by querying a large database of simulation
results, selecting the relevant scenarios, and presenting them in an
easy-to-interpret format.</p>
</div>
<div class="section level3">
<h3 id="pre-computed-simulation-database">Pre-computed Simulation Database<a class="anchor" aria-label="anchor" href="#pre-computed-simulation-database"></a>
</h3>
<p>To make sample size planning fast and accessible,
<strong>sprtt</strong> includes access to extensive simulation results.
These simulations were conducted by:</p>
<ol style="list-style-type: decimal">
<li>Generating thousands of datasets for each combination of
parameters</li>
<li>Running sequential ANOVAs on each dataset</li>
<li>Recording when each test stopped (if at all) and whether it
correctly detected the effect</li>
<li>Aggregating these results to determine power and expected sample
sizes</li>
</ol>
<p>This simulation database is approximately 15 MB and is stored
externally to keep the package installation size small. The data are
downloaded automatically on first use and cached locally for future
sessions.</p>
</div>
<div class="section level3">
<h3 id="supported-design-parameters">Supported Design Parameters<a class="anchor" aria-label="anchor" href="#supported-design-parameters"></a>
</h3>
<p>The simulation database covers a range of common experimental
designs:</p>
<ul>
<li>
<strong>Effect sizes (Cohen’s <em>f</em>):</strong> 0.10, 0.15,
0.20, 0.25, 0.30, 0.35, 0.40</li>
<li>
<strong>Number of groups:</strong> 2, 3, 4, 5</li>
<li>
<strong>Desired power:</strong> 0.80, 0.90, 0.95</li>
<li>
<strong>Alpha level:</strong> 0.05 (fixed)</li>
</ul>
<p>These values span from small to large effects and from simple to
moderately complex designs, covering most practical research
scenarios.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="installation-and-setup">Installation and Setup<a class="anchor" aria-label="anchor" href="#installation-and-setup"></a>
</h3>
<p>First, ensure the <strong>sprtt</strong> package is installed and
loaded:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from CRAN (if needed)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sprtt"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://meikesteinhilber.github.io/sprtt/">sprtt</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="your-first-sample-size-report">Your First Sample Size Report<a class="anchor" aria-label="anchor" href="#your-first-sample-size-report"></a>
</h3>
<p>Let’s say you’re planning a study comparing three groups and expect a
medium effect size (Cohen’s <em>f</em> = 0.25). You want 95% power to
detect this effect. Here’s how to generate a sample size planning
report:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span></span>
<span>  f_expected <span class="op">=</span> <span class="fl">0.25</span>,  <span class="co"># Expected effect size</span></span>
<span>  k_groups <span class="op">=</span> <span class="fl">3</span>,       <span class="co"># Number of groups</span></span>
<span>  power <span class="op">=</span> <span class="fl">0.95</span>        <span class="co"># Desired power</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>When you run this code for the first time, several things happen:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Data download:</strong> The simulation database (~70 MB) is
downloaded from GitHub and saved to your local cache directory. This is
a one-time operation.</li>
<li>
<strong>Report generation:</strong> An HTML report is created in
your temporary directory.</li>
<li>
<strong>Browser launch:</strong> The report automatically opens in
your default web browser (if running interactively).</li>
</ol>
<p>The entire process typically takes 30-60 seconds for the initial
download, then just a few seconds for subsequent reports.</p>
</div>
<div class="section level3">
<h3 id="understanding-the-output">Understanding the Output<a class="anchor" aria-label="anchor" href="#understanding-the-output"></a>
</h3>
<p>The generated HTML report contains several sections:</p>
<ul>
<li>
<strong>Recommended sample size:</strong> The maximum sample size
you should plan for, ensuring you achieve the desired power.</li>
<li>
<strong>Expected sample size:</strong> The average sample size at
which sequential tests stopped in the simulations. This is typically
much lower than the maximum, illustrating the efficiency of sequential
designs.</li>
<li>
<strong>Visual summaries:</strong> Plots showing the distribution of
stopping points and how power accumulates over sample size.</li>
<li>
<strong>Technical details:</strong> Information about the simulation
parameters and assumptions.</li>
</ul>
<p>This report serves as a comprehensive reference you can share with
collaborators, include in grant applications, or use for your own
planning.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="function-reference">Function Reference<a class="anchor" aria-label="anchor" href="#function-reference"></a>
</h2>
<div class="section level3">
<h3 id="main-function-plan_sample_size">Main Function: <code>plan_sample_size()</code><a class="anchor" aria-label="anchor" href="#main-function-plan_sample_size"></a>
</h3>
<p>The primary function for generating sample size reports.</p>
<div class="section level4">
<h4 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h4>
<table class="table">
<colgroup>
<col width="28%">
<col width="15%">
<col width="23%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>f_expected</code></td>
<td>numeric</td>
<td><em>required</em></td>
<td>Expected standardized effect size (Cohen’s <em>f</em>). Must be one
of: 0.10, 0.15, 0.20, 0.25, 0.30, 0.35, or 0.40.</td>
</tr>
<tr class="even">
<td><code>k_groups</code></td>
<td>integer</td>
<td><em>required</em></td>
<td>Number of groups to compare. Must be 2, 3, 4, or 5.</td>
</tr>
<tr class="odd">
<td><code>power</code></td>
<td>numeric</td>
<td>0.95</td>
<td>Desired statistical power. Must be 0.80, 0.90, or 0.95.</td>
</tr>
<tr class="even">
<td><code>output_dir</code></td>
<td>character</td>
<td><code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code></td>
<td>Directory where the HTML report will be saved.</td>
</tr>
<tr class="odd">
<td><code>output_file</code></td>
<td>character</td>
<td><code>"sprtt-report-sample-size-planning.html"</code></td>
<td>Filename for the generated report.</td>
</tr>
<tr class="even">
<td><code>open</code></td>
<td>logical</td>
<td><code><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive()</a></code></td>
<td>Whether to open the report in your browser after generation. Set to
<code>FALSE</code> for batch processing.</td>
</tr>
<tr class="odd">
<td><code>overwrite</code></td>
<td>logical</td>
<td>FALSE</td>
<td>Whether to overwrite an existing file with the same name without
prompting.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="return-value">Return Value<a class="anchor" aria-label="anchor" href="#return-value"></a>
</h4>
<p>The function invisibly returns the full path to the generated HTML
file as a character string. This is useful if you want to
programmatically access or move the file after generation.</p>
</div>
<div class="section level4">
<h4 id="input-validation">Input Validation<a class="anchor" aria-label="anchor" href="#input-validation"></a>
</h4>
<p>The function validates all inputs before generating the report. If
you specify a parameter value that doesn’t exist in the simulation
database, you’ll receive an informative error message listing the
available options. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This will produce an error:</span></span>
<span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span>f_expected <span class="op">=</span> <span class="fl">0.22</span>, k_groups <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: `f_expected` = 0.22 is not available. </span></span>
<span><span class="co">#&gt; Please choose one of 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, or 0.4</span></span></code></pre></div>
<hr>
</div>
</div>
</div>
<div class="section level2">
<h2 id="practical-examples">Practical Examples<a class="anchor" aria-label="anchor" href="#practical-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1-comparing-different-effect-sizes">Example 1: Comparing Different Effect Sizes<a class="anchor" aria-label="anchor" href="#example-1-comparing-different-effect-sizes"></a>
</h3>
<p>Effect size has a dramatic impact on required sample size. Here’s how
to generate reports for different scenarios:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Planning for a small effect (f = 0.15)</span></span>
<span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span>f_expected <span class="op">=</span> <span class="fl">0.15</span>, k_groups <span class="op">=</span> <span class="fl">3</span>, power <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Planning for a large effect (f = 0.40)</span></span>
<span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span>f_expected <span class="op">=</span> <span class="fl">0.40</span>, k_groups <span class="op">=</span> <span class="fl">3</span>, power <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p>You’ll notice that the report for <em>f</em> = 0.15 recommends a much
larger maximum sample size than <em>f</em> = 0.40. This reflects the
fundamental principle that smaller effects require more data to detect
reliably.</p>
</div>
<div class="section level3">
<h3 id="example-2-adjusting-power-requirements">Example 2: Adjusting Power Requirements<a class="anchor" aria-label="anchor" href="#example-2-adjusting-power-requirements"></a>
</h3>
<p>Different research contexts may require different levels of power.
While 80% is often considered a minimum, many researchers prefer 90% or
95% power:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Standard power (80%)</span></span>
<span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span>f_expected <span class="op">=</span> <span class="fl">0.25</span>, k_groups <span class="op">=</span> <span class="fl">3</span>, power <span class="op">=</span> <span class="fl">0.80</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Higher power for critical studies (95%)</span></span>
<span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span>f_expected <span class="op">=</span> <span class="fl">0.25</span>, k_groups <span class="op">=</span> <span class="fl">3</span>, power <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p>Higher power requirements lead to larger recommended sample sizes but
provide greater confidence in detecting true effects when they
exist.</p>
</div>
<div class="section level3">
<h3 id="example-3-saving-reports-to-a-specific-location">Example 3: Saving Reports to a Specific Location<a class="anchor" aria-label="anchor" href="#example-3-saving-reports-to-a-specific-location"></a>
</h3>
<p>By default, reports are saved to a temporary directory. For reports
you want to keep, specify a custom location:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span></span>
<span>  f_expected <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  k_groups <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="st">"~/Documents/research/sample_size_planning"</span>,</span>
<span>  output_file <span class="op">=</span> <span class="st">"study1_anova_power.html"</span>,</span>
<span>  open <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This is particularly useful when preparing documentation for grant
applications, pre-registrations, or manuscript supplementary
materials.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="data-management">Data Management<a class="anchor" aria-label="anchor" href="#data-management"></a>
</h2>
<div class="section level3">
<h3 id="the-simulation-database">The Simulation Database<a class="anchor" aria-label="anchor" href="#the-simulation-database"></a>
</h3>
<p>The simulation database contains results from millions of individual
simulated studies. For each combination of parameters (effect size,
number of groups, power), the database includes:</p>
<ul>
<li>Stopping points (sample sizes at which sequential tests
terminated)</li>
<li>Decision outcomes (correct vs. incorrect statistical decisions)</li>
<li>Summary statistics (mean, median, quantiles of stopping points)</li>
</ul>
<p>This comprehensive database enables instant sample size
recommendations without requiring users to run time-consuming
simulations themselves.</p>
</div>
<div class="section level3">
<h3 id="cache-system">Cache System<a class="anchor" aria-label="anchor" href="#cache-system"></a>
</h3>
<p>To minimize download times and enable offline use,
<strong>sprtt</strong> implements a local caching system. The simulation
data are stored in a platform-specific user data directory:</p>
<ul>
<li>
<strong>Windows:</strong> <code>%LOCALAPPDATA%\sprtt</code>
</li>
<li>
<strong>macOS:</strong>
<code>~/Library/Application Support/sprtt</code>
</li>
<li>
<strong>Linux:</strong> <code>~/.local/share/sprtt</code>
</li>
</ul>
<p>Once downloaded, the data persist across R sessions, so you only
download them once.</p>
</div>
<div class="section level3">
<h3 id="managing-cached-data">Managing Cached Data<a class="anchor" aria-label="anchor" href="#managing-cached-data"></a>
</h3>
<div class="section level4">
<h4 id="downloading-data-explicitly">Downloading Data Explicitly<a class="anchor" aria-label="anchor" href="#downloading-data-explicitly"></a>
</h4>
<p>While <code><a href="../reference/plan_sample_size.html">plan_sample_size()</a></code> downloads data automatically
when needed, you can also download it explicitly:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download simulation data manually</span></span>
<span><span class="fu"><a href="../reference/download_sample_size_data.html">download_sample_size_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This is useful if you want to: - Pre-download data on a fast internet
connection before traveling - Verify the download completed successfully
- Troubleshoot download issues</p>
<p>To force a re-download (for example, after a package update with new
simulation data):</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/download_sample_size_data.html">download_sample_size_data</a></span><span class="op">(</span>force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="checking-cache-status">Checking Cache Status<a class="anchor" aria-label="anchor" href="#checking-cache-status"></a>
</h4>
<p>To see whether data are cached and how much disk space they
occupy:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cache_info.html">cache_info</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This displays: - The cache directory location on your system -
Whether simulation data are currently cached - The file size
(approximately 15 MB when cached)</p>
</div>
<div class="section level4">
<h4 id="clearing-the-cache">Clearing the Cache<a class="anchor" aria-label="anchor" href="#clearing-the-cache"></a>
</h4>
<p>If you need to free up disk space or suspect corrupted data, you can
clear the cache:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cache_clear.html">cache_clear</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The data will be re-downloaded automatically the next time you run
<code><a href="../reference/plan_sample_size.html">plan_sample_size()</a></code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="working-with-simulation-data-directly">Working with Simulation Data Directly<a class="anchor" aria-label="anchor" href="#working-with-simulation-data-directly"></a>
</h3>
<p>Advanced users may want to access the raw simulation data for custom
analyses or visualizations. You can load the data directly into your R
session:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the complete simulation database</span></span>
<span><span class="va">df_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_sample_size_data.html">load_sample_size_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine the structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">df_all</span><span class="op">)</span></span></code></pre></div>
<p>This data frame contains all simulation results and can be filtered,
summarized, or visualized using standard R tools. For example:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get results for a specific scenario</span></span>
<span><span class="va">results_subset</span> <span class="op">&lt;-</span> <span class="va">df_all</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">f_expected</span> <span class="op">==</span> <span class="fl">0.25</span>,</span>
<span>    <span class="va">power</span> <span class="op">==</span> <span class="fl">0.95</span>,</span>
<span>    <span class="va">k_groups</span> <span class="op">==</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate summary statistics</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results_subset</span><span class="op">$</span><span class="va">n_max</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="workflow-recommendations">Workflow Recommendations<a class="anchor" aria-label="anchor" href="#workflow-recommendations"></a>
</h2>
<div class="section level3">
<h3 id="planning-a-single-study">Planning a Single Study<a class="anchor" aria-label="anchor" href="#planning-a-single-study"></a>
</h3>
<p>For planning a single study, the workflow is straightforward:</p>
<ol style="list-style-type: decimal">
<li>Determine your expected effect size based on prior research or pilot
data</li>
<li>Decide on your desired power level (typically 0.80, 0.90, or
0.95)</li>
<li>Count the number of groups in your design</li>
<li>Generate the report and review the recommendations</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://meikesteinhilber.github.io/sprtt/">sprtt</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span></span>
<span>  f_expected <span class="op">=</span> <span class="fl">0.25</span>,    <span class="co"># Based on prior meta-analysis</span></span>
<span>  k_groups <span class="op">=</span> <span class="fl">4</span>,         <span class="co"># Four experimental conditions</span></span>
<span>  power <span class="op">=</span> <span class="fl">0.90</span>          <span class="co"># 90% power for this pilot study</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="preparing-multiple-scenarios">Preparing Multiple Scenarios<a class="anchor" aria-label="anchor" href="#preparing-multiple-scenarios"></a>
</h3>
<p>When preparing grant applications or pre-registrations, you might
want to explore multiple scenarios (e.g., different effect size
assumptions):</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define scenarios to compare</span></span>
<span><span class="va">scenarios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.20</span>, <span class="fl">0.25</span>, <span class="fl">0.30</span><span class="op">)</span>,</span>
<span>  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"conservative"</span>, <span class="st">"expected"</span>, <span class="st">"optimistic"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate reports for each scenario</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">scenarios</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span></span>
<span>    f_expected <span class="op">=</span> <span class="va">scenarios</span><span class="op">$</span><span class="va">effect</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    k_groups <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    power <span class="op">=</span> <span class="fl">0.90</span>,</span>
<span>    output_dir <span class="op">=</span> <span class="st">"grant_application/power_analyses"</span>,</span>
<span>    output_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"power_analysis_%s.html"</span>, <span class="va">scenarios</span><span class="op">$</span><span class="va">label</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    open <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Don't open each one</span></span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Generated "</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">scenarios</span><span class="op">)</span>, <span class="st">" sample size reports"</span><span class="op">)</span></span></code></pre></div>
<p>This approach creates a set of reports that document your planning
across different assumptions, demonstrating thorough preparation to
reviewers.</p>
</div>
<div class="section level3">
<h3 id="first-time-setup-in-a-new-environment">First-Time Setup in a New Environment<a class="anchor" aria-label="anchor" href="#first-time-setup-in-a-new-environment"></a>
</h3>
<p>When setting up <strong>sprtt</strong> on a new computer or after a
clean R installation:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sprtt"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://meikesteinhilber.github.io/sprtt/">sprtt</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify installation by generating a test report</span></span>
<span><span class="fu"><a href="../reference/plan_sample_size.html">plan_sample_size</a></span><span class="op">(</span>f_expected <span class="op">=</span> <span class="fl">0.25</span>, k_groups <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Data downloads automatically on first run</span></span>
<span><span class="co"># All subsequent reports will be fast</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<div class="section level3">
<h3 id="download-issues">Download Issues<a class="anchor" aria-label="anchor" href="#download-issues"></a>
</h3>
<p><strong>Symptom:</strong> Error message stating “Failed to download
simulation data”</p>
<p><strong>Possible causes:</strong> - No internet connection - Firewall
blocking GitHub access - GitHub temporary outage - Corrupted partial
download</p>
<p><strong>Solutions:</strong></p>
<ol style="list-style-type: decimal">
<li>Verify your internet connection</li>
<li>Try downloading manually with
<code>download_sample_size_data(force = TRUE)</code>
</li>
<li>Check the cache location with <code><a href="../reference/cache_info.html">cache_info()</a></code> and ensure
you have write permissions</li>
<li>If behind a corporate firewall, contact your IT department about
accessing GitHub</li>
<li>Clear the cache and retry: <code><a href="../reference/cache_clear.html">cache_clear()</a></code> followed by
<code><a href="../reference/download_sample_size_data.html">download_sample_size_data()</a></code>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="parameter-availability">Parameter Availability<a class="anchor" aria-label="anchor" href="#parameter-availability"></a>
</h3>
<p><strong>Symptom:</strong> Error message “f_expected = X is not
available”</p>
<p><strong>Cause:</strong> You’ve requested a parameter value not
included in the simulation database</p>
<p><strong>Solution:</strong> The simulation database includes specific
discrete values to keep file sizes manageable. Check available
options:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_sample_size_data.html">load_sample_size_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Available effect sizes (f)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df_all</span><span class="op">$</span><span class="va">f_expected</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Available power levels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df_all</span><span class="op">$</span><span class="va">power</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Available group counts</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df_all</span><span class="op">$</span><span class="va">k_groups</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then use the closest available value to your desired parameter. For
instance, if you want <em>f</em> = 0.22, use 0.20 or 0.25 instead.</p>
</div>
<div class="section level3">
<h3 id="file-overwrite-conflicts">File Overwrite Conflicts<a class="anchor" aria-label="anchor" href="#file-overwrite-conflicts"></a>
</h3>
<p><strong>Symptom:</strong> Prompted whether to overwrite an existing
file</p>
<p><strong>Cause:</strong> A report with the same filename already
exists in the output directory</p>
<p><strong>Solutions:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Change the filename:</strong> Specify a different
<code>output_file</code> parameter</li>
<li>
<strong>Allow overwriting:</strong> Set
<code>overwrite = TRUE</code> to replace the file automatically</li>
<li>
<strong>Use version numbers:</strong> Include dates or version
numbers in filenames: <code>"report_2025-01-07.html"</code>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="memory-issues">Memory Issues<a class="anchor" aria-label="anchor" href="#memory-issues"></a>
</h3>
<p><strong>Symptom:</strong> Error about insufficient memory when
loading simulation data</p>
<p><strong>Cause:</strong> The simulation database (~70 MB as a file,
larger in memory) exceeds available RAM</p>
<p><strong>Solution:</strong> This is rare but can occur on severely
memory-constrained systems. Close other applications and try again. If
the problem persists, consider: - Accessing the simulation data on a
more powerful computer - Using the pre-generated reports rather than
creating new ones - Contacting the package maintainers about accessing a
subset of the data</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="technical-details">Technical Details<a class="anchor" aria-label="anchor" href="#technical-details"></a>
</h2>
<div class="section level3">
<h3 id="simulation-methodology">Simulation Methodology<a class="anchor" aria-label="anchor" href="#simulation-methodology"></a>
</h3>
<p>The simulation database was created using the following
procedure:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Data generation:</strong> For each parameter combination,
thousands of datasets were generated under the null and alternative
hypotheses</li>
<li>
<strong>Sequential testing:</strong> Each dataset was analyzed using
the sequential ANOVA procedure, with continuous monitoring until a
decision or maximum sample size</li>
<li>
<strong>Recording outcomes:</strong> Stopping points, decisions, and
statistical power were recorded</li>
<li>
<strong>Aggregation:</strong> Results were summarized to produce
power curves and sample size recommendations</li>
</ol>
<p>This approach ensures that recommendations account for the complex
behavior of sequential tests, including early stopping patterns and Type
I error control.</p>
</div>
<div class="section level3">
<h3 id="data-storage-and-distribution">Data Storage and Distribution<a class="anchor" aria-label="anchor" href="#data-storage-and-distribution"></a>
</h3>
<p>To balance package size with data accessibility, the simulation
results are stored externally on GitHub:</p>
<ul>
<li>
<strong>Repository:</strong>
<code>MeikeSteinhilber/sprtt_plan_sample_size</code>
</li>
<li>
<strong>Filename:</strong>
<code>sprtt_external_data_plan_sample_size.rds</code>
</li>
<li>
<strong>Format:</strong> Compressed R data file (.rds)</li>
<li>
<strong>Size:</strong> ~70 MB</li>
<li>
<strong>Access method:</strong> <code>piggyback</code> package for
downloading GitHub release assets</li>
</ul>
<p>This architecture keeps the installed package lightweight (~1 MB)
while providing access to comprehensive simulation data on demand.</p>
</div>
<div class="section level3">
<h3 id="alpha-level">Alpha Level<a class="anchor" aria-label="anchor" href="#alpha-level"></a>
</h3>
<p>All sample size recommendations assume a Type I error rate (α) of
0.05. This value is fixed and not user-configurable, as it represents
the standard in most research fields. If your research requires a
different alpha level, please contact the package maintainers to discuss
extending the simulation database.</p>
</div>
<div class="section level3">
<h3 id="computational-considerations">Computational Considerations<a class="anchor" aria-label="anchor" href="#computational-considerations"></a>
</h3>
<p>Generating each HTML report requires: - Loading the simulation
database into memory - Filtering to relevant parameter combinations -
Rendering the R Markdown template with embedded plots</p>
<p>On modern systems, this typically completes in 2-5 seconds after the
initial data download. The process is entirely local after data are
cached—no internet connection is required for subsequent reports.</p>
<hr>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Meike Snijder-Steinhilber, Martin Schnuerch, Anna-Lena Schubert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
