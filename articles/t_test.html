<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This vignette describes the sequential t-test.
">
<title>Sequential t-Test â€¢ sprtt</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sequential t-Test">
<meta property="og:description" content="This vignette describes the sequential t-test.
">
<meta property="og:image" content="https://meikesteinhilber.github.io/sprtt/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sprtt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/usage_sprtt.html">How to use the sprtt package</a>
    <a class="dropdown-item" href="../articles/use_case.html">Use Case</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Sequential Tests</h6>
    <a class="dropdown-item" href="../articles/t_test.html">Sequential t-Test</a>
    <a class="dropdown-item" href="../articles/one_way_anova.html">Sequential One-Way ANOVA</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Further Topics</h6>
    <a class="dropdown-item" href="../articles/sprts.html">SPRTs</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MeikeSteinhilber/sprtt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sequential t-Test</h1>
                        <h4 data-toc-skip class="author">Meike
Steinhilber</h4>
            
            <h4 data-toc-skip class="date">2023-07-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MeikeSteinhilber/sprtt/blob/HEAD/vignettes/t_test.Rmd" class="external-link"><code>vignettes/t_test.Rmd</code></a></small>
      <div class="d-none name"><code>t_test.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>sprtt</code> package is a <strong>s</strong>equential
<strong>p</strong>robability <strong>r</strong>atio
<strong>t</strong>ests <strong>t</strong>oolbox
(<strong>sprtt</strong>). This vignette describes the theoretical
background of these tests.</p>
<p>Other recommended vignettes cover:</p>
<ul>
<li><p>a <a href="https://meikesteinhilber.github.io/sprtt/articles/usage-sprtt.html">general
guide</a>, how to use the package and</p></li>
<li><p>an extended <a href="https://meikesteinhilber.github.io/sprtt/articles/use-case.html">use
case</a>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="what-is-a-sequential-test-procedure">What is a sequential test procedure?<a class="anchor" aria-label="anchor" href="#what-is-a-sequential-test-procedure"></a>
</h2>
<p>With a sequential approach, data is continuously collected and an
analysis is performed after each data point, which can lead to three
different results <span class="citation">(A. Wald, 1945)</span>:</p>
<ul>
<li><p>The data collection is <em>terminated</em> because enough
evidence has been collected for the null hypothesis
(H<sub>0</sub>).</p></li>
<li><p>The data collection is <em>terminated</em> because enough
evidence has been collected for the alternative hypothesis
(H<sub>1</sub>).</p></li>
<li><p>The data collection <em>will continue</em> as there is not yet
enough evidence for either of the two hypotheses.</p></li>
</ul>
<p>Basically it is not necessary to perform an analysis after each data
point â€” several data points can also be added at once. However, this
affects the sample size (N) and the error rates <span class="citation">(Schnuerch et al., 2020)</span>.</p>
<p>The efficiency of sequential designs has already been examined.
Reductions in the sample by 50% and more were found in comparison to
analyses with fixed sample sizes <span class="citation">(Schnuerch et
al., 2020; A. Wald, 1945)</span>. Sequential hypothesis testing is
therefore particularly suitable when resources are limited because the
required sample size is reduced without compromising predefined error
probabilities.</p>
</div>
<div class="section level2">
<h2 id="what-is-the-sequential-t-test">What is the sequential <em>t</em>-test?<a class="anchor" aria-label="anchor" href="#what-is-the-sequential-t-test"></a>
</h2>
<p>The sequential <em>t</em>-test is based on the Sequential Probability
Ratio Test (SPRT) by Abraham <span class="citation">Abraham Wald
(1947)</span>, which is a highly efficient sequential hypothesis test.
However, the usage of WaldÂ´s SPRT is limited in the case of normally
distributed data, because the variance has to be known or specified in
the hypothesis. Rushton <span class="citation">(1952; 1950)</span> and
<span class="citation">Hajnal (1961)</span> have further developed the
SPRT using the <em>t</em>-statistic. The basic idea is to transform the
sequence of observations (which is dependent on the variance) into a
sequence of the associated <em>t</em>-statistic (which is
<em>in</em>dependent of the variance).</p>
<p>In the SPRT the null and alternative hypotheses are defined as
follows, with ğœƒ representing the model parameter :</p>
<p><span class="math display">\[
H_0:\ ğœƒ\ =\ ğœƒ_0 \\
H_1:\ ğœƒ\ =\ ğœƒ_1
\]</span></p>
<p>The test statistic of the SPRT is based on a likelihood ratio, which
is a measure of the relative evidence in the data for the given
hypotheses. More specifically, it is the ratio of the likelihood of the
alternative hypothesis to the likelihood of the null hypothesis at the
<em>m</em>-th step of the sampling process (LR<sub>m</sub>).</p>
<p><span class="math display">\[
LR_{m}
= \frac {f(data_m | H_1)} {f(data_m | H_0)}
= \frac {ğ‘“(x_1,...,x_m | ğœƒ_1)} {ğ‘“(x_1,...,x_m  | ğœƒ_0)}
\]</span></p>
<p>Before the transformation into the <em>t</em>-statistic, the model
parameter ğœƒ contains the parameters of a normal distribution: the mean
(<em>Âµ</em>) and the standard deviation (ğœ). Therefore, the Wald SPRT
requires prior knowledge about the variance (ğœ<sup>2</sup>) or a
specification in the hypotheses.</p>
<p>After the transformation of the observed values into the associated
t-statistic, the model parameter ğœƒ contains the parameters of the
non-central t-distribution: the degrees of freedom (<em>df</em>) and the
non-centrality parameter (ğ›¥).</p>
<p><span class="math display">\[
{ğ‘“(x_1,...,x_m | Âµ,ğœ)} =&gt; {ğ‘“(t_2,...,t_m  | df,ğ›¥)}
\]</span></p>
<p>For the calculation of the degrees of freedom, only the sample size
of the group(s) is needed. The non-centrality parameter also requires a
specification of the expected effect size in form of Cohen`s d
(<em>d</em>).</p>
<p>To eventually calculate the LR of the sequential <em>t</em>-test,
only the current t<sub><em>m</em></sub>-statistic is necessary. <span class="citation">S. Rushton (1950)</span> demonstrated that an SPRT can
be performed by simply considering the ratio of probability densities
for the most recent t<sub><em>m</em></sub> statistic under the
alternative and null hypothesis at any <em>m-</em>th stage. Thus, the
test statistic for a one and two-sided sequential t-test can be
calculated as follows:</p>
<p><span class="math display">\[
LR_{m,\ one-sided\ sequential\ t-test}
= \frac {ğ‘“(t_m | ğœƒ_1)} {ğ‘“(t_m | ğœƒ_0)}
\\
LR_{m,\ two-sided\ sequential\ t-test}
= \frac {ğ‘“(t_m^2 | ğœƒ_1)} {ğ‘“(t_m^2 | ğœƒ_0)}.
\]</span></p>
<p>To account for the fact that the algebraic sign is unknown in a
two-sided test, the <em>t</em>-value is squared <span class="citation">(S. Rushton, 1952)</span>.</p>
<p>After the calculation of the test statistic, the decision will be
either to continue sampling or to terminate the sampling and accept one
of the hypotheses. <span class="citation">A. Wald (1945)</span> defined
the following rules for the SPRT:</p>
<table class="table">
<thead><tr class="header">
<th align="center">Condition</th>
<th align="right">Decision</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">LR<sub>m</sub> â‰¤ B</td>
<td align="right">accept H<sub>0</sub> and reject H<sub>1</sub>
</td>
</tr>
<tr class="even">
<td align="center">B &lt; LR<sub>m</sub> &lt; A</td>
<td align="right">continue sampling</td>
</tr>
<tr class="odd">
<td align="center">LR<sub>m</sub> â‰¤ A</td>
<td align="right">accept H<sub>1</sub> and reject H<sub>0</sub>
</td>
</tr>
</tbody>
</table>
<p>The A and B boundaries are calculated with the previously defined
error rates ğ›¼ (Type I error) and ğ›½ (Type II error) as follows:</p>
<p><span class="math display">\[
A = \left( \frac{1 - ğ›½}{ğ›¼} \right) \\
B = \left( \frac{ğ›½}{1 - ğ›¼} \right).
\]</span></p>
<p>In summary, three specifications are required to calculate a
sequential <em>t</em>-test:</p>
<ul>
<li><p>the ğ›¼ error probability (usually 0.05 or less),</p></li>
<li><p>the ğ›½ error probability (usually .20 or less), and</p></li>
<li><p>CohenÂ´s d (either as the expected effect size or as the lower
limit for a substantial effect).</p></li>
</ul>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-hajnal1961" class="csl-entry">
Hajnal, J. (1961). A two-sample sequential t-test. <em>Biometrika</em>,
<em>48</em>(1/2), 65â€“75. <a href="https://doi.org/10.2307/2333131" class="external-link">https://doi.org/10.2307/2333131</a>
</div>
<div id="ref-rushton1952" class="csl-entry">
Rushton, S. (1952). On a <span>Two-Sided Sequential</span>
t-<span>Test</span>. <em>Biometrika</em>, <em>39</em>(3/4), 302. <a href="https://doi.org/10.2307/2334026" class="external-link">https://doi.org/10.2307/2334026</a>
</div>
<div id="ref-rushton1950" class="csl-entry">
Rushton, S. (1950). On a sequential t-test. <em>Biometrika</em>,
<em>37</em>, 326â€“333. <a href="https://doi.org/10.2307/2332385" class="external-link">https://doi.org/10.2307/2332385</a>
</div>
<div id="ref-schnuerch2020a" class="csl-entry">
Schnuerch, M., Erdfelder, E., &amp; Heck, D. W. (2020). Sequential
hypothesis tests for multinomial processing tree models. <em>Journal of
Mathematical Psychology</em>, <em>95</em>, 102326. <a href="https://doi.org/10.1016/j.jmp.2020.102326" class="external-link">https://doi.org/10.1016/j.jmp.2020.102326</a>
</div>
<div id="ref-wald1945" class="csl-entry">
Wald, A. (1945). Sequential tests of statistical hypotheses. <em>The
Annals of Mathematical Statistics</em>, <em>16</em>(2), 117â€“186.
</div>
<div id="ref-wald1947" class="csl-entry">
Wald, Abraham. (1947). <em>Sequential analysis</em>. <span>Wiley</span>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Meike Steinhilber, Martin Schnuerch, Anna-Lena Schubert.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
