<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sequential t-test â€¢ sprtt</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Sequential t-test">
<meta property="og:description" content="This vignette describes the sequential t-test.
">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sprtt</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sequential_testing.html">Sequential t-test</a>
    </li>
    <li>
      <a href="../articles/usage-sprtt.html">How to use the sprtt package</a>
    </li>
    <li>
      <a href="../articles/use-case.html">Example Use Case</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MeikeSteinhilber/sprtt/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="sequential_testing_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Sequential t-test</h1>
                        <h4 class="author">Meike Steinhilber</h4>
            
            <h4 class="date">2021-04-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MeikeSteinhilber/sprtt/blob/master/vignettes/sequential_testing.Rmd"><code>vignettes/sequential_testing.Rmd</code></a></small>
      <div class="hidden name"><code>sequential_testing.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <code>sprtt</code> package is the implementation of <strong>s</strong>equential <strong>p</strong>robability <strong>r</strong>atio <strong>t</strong>ests using the associated <strong>t</strong>-statistic (<strong>sprtt</strong>). This vignette describes the theoretical background of these tests.</p>
<p>Other recommended vignettes cover:</p>
<ul>
<li><p>a <a href="https://meikesteinhilber.github.io/sprtt/articles/usage-sprtt.html">general guide</a>, how to use the package and</p></li>
<li><p>an extended <a href="https://meikesteinhilber.github.io/sprtt/articles/use-case.html">use case</a>.</p></li>
</ul>
</div>
<div id="sequential-t-test" class="section level2">
<h2 class="hasAnchor">
<a href="#sequential-t-test" class="anchor"></a>Sequential t-Test</h2>
<div id="what-is-a-sequential-test-procedure" class="section level3">
<h3 class="hasAnchor">
<a href="#what-is-a-sequential-test-procedure" class="anchor"></a>What is a sequential test procedure?</h3>
<p>With a sequential approach, data is continuously collected and an analysis is performed after each data point, which can lead to three different results <span class="citation">(Wald, 1945)</span>:</p>
<ul>
<li><p>The data collection is <em>terminated</em> because enough evidence has been collected for the null hypothesis (H<sub>0</sub>).</p></li>
<li><p>The data collection is <em>terminated</em> because enough evidence has been collected for the alternative hypothesis (H<sub>1</sub>).</p></li>
<li><p>The data collection <em>will continue</em> as there is not yet enough evidence for either of the two hypotheses.</p></li>
</ul>
<p>Basically it is not necessary to perform an analysis after each data point â€” several data points can also be added at once. However, this affects the sample size (N) and the error rates <span class="citation">(Stefan et al., 2020)</span>.</p>
<p>The efficiency of sequential designs has already been examined. Reductions in the sample by 50% and more were found in comparison to analyses with fixed sample sizes <span class="citation">(Schnuerch &amp; Erdfelder, 2020; Wald, 1945)</span>. Sequential hypothesis testing is therefore particularly suitable when resources are limited because the required sample size is reduced without compromising predefined error probabilities.</p>
</div>
<div id="what-is-the-sequential-t-test" class="section level3">
<h3 class="hasAnchor">
<a href="#what-is-the-sequential-t-test" class="anchor"></a>What is the sequential t-test?</h3>
<p>The sequential t-test is based on the Sequential Probability Ratio Test (SPRT) by Abraham <span class="citation">Wald (1947)</span>, which is a highly efficient sequential hypothesis test. However, the usage of WaldÂ´s SPRT is limited for normally distributed data, because the variance has to be known or specified in the hypothesis. Rushton <span class="citation">(1950, 1952)</span> and <span class="citation">Hajnal (1961)</span> have further developed the SPRT using the t-statistic. The basic idea is to transform the sequence of observations (which is dependent on the variance) into a sequence of the associated t-statistic (which is <em>in</em>dependent of the variance).</p>
<p>In the SPRT the null and alternative hypotheses are defined as follows, whereas ğœƒ represents the model parameter :</p>
<p><span class="math display">\[
H_0:\ ğœƒ\ =\ ğœƒ_0 \\
H_1:\ ğœƒ\ =\ ğœƒ_1
\]</span></p>
<p>The test statistic of the SPRT is based on a likelihood ratio. That is a measure of the relative evidence in the data for the given hypotheses. More specifically, it is the ratio of the likelihood of the alternative hypothesis to the likelihood of the null hypothesis at the <em>m</em>-th step of the sampling process (LR<sub>m</sub>).</p>
<p><span class="math display">\[
LR_{m} 
= \frac {f(data_m | H_1)} {f(data_m | H_0)}
= \frac {ğ‘“(D_m | ğœƒ_1)} {ğ‘“(D_m | ğœƒ_0)} 
= \frac {ğ‘“(x_1,...,x_m | ğœƒ_1)} {ğ‘“(x_1,...,x_m  | ğœƒ_0)} 
\]</span></p>
<p>Before the transformation, the model parameter ğœƒ contains the parameters of a normal distribution: the mean (<em>Âµ</em>) and the standard deviation (ğœ). Therefore, the Wald SPRT requires prior knowledge about the variance (ğœ<sup>2</sup>) or a specification in the hypotheses.</p>
<p>After the transformation of the observed values into the associated t-statistic, the model parameter ğœƒ contains the parameters of the non-central t-distribution: the degrees of freedom (<em>df</em>) and the non-centrality parameter (ğ›¥).</p>
<p><span class="math display">\[
{ğ‘“(x_1,...,x_m | Âµ,ğœ,)} =&gt; {ğ‘“(t_2,...,t_m  | df,ğ›¥)} 
\]</span></p>
<p>For the calculation of the degrees of freedom, only the sample size of the group(s) is needed. The non-centrality parameter also requires a specification of the expected effect size in form of Cohen`s d (<em>d</em>).</p>
<p>To eventually calculate the LR of the sequential t-test fortunately only the current t<sub><em>m</em></sub>-statistic is necessary. <span class="citation">Rushton (1950)</span> showed that an SPRT can be performed by simply considering the ratio of probability densities for the most recent t<sub><em>m</em></sub> statistic under the alternative and null hypothesis at any <em>m-</em>th stage. Thus, the test statistic for a one and two-sided sequential t-test can be calculated as follows:</p>
<p><span class="math display">\[
LR_{m,\ one-sided\ sequential\ t-test} 
= \frac {ğ‘“(t_m | ğœƒ_1)} {ğ‘“(t_m | ğœƒ_0)}
\\
LR_{m,\ two-sided\ sequential\ t-test} 
= \frac {ğ‘“(t_m^2 | ğœƒ_1)} {ğ‘“(t_m^2 | ğœƒ_0)}.
\]</span></p>
<p>To account for the fact that the algebraic sign is unknown in a two-sided test, the t-value is squared <span class="citation">(Stefan et al., 2020)</span>.</p>
<p>After the calculation of the test statistic, the decision will be either to continue sampling or to terminate the sampling and accept one of the hypotheses. <span class="citation">Wald (1945)</span> defined the following rules for the SPRT:</p>
<table class="table">
<thead><tr class="header">
<th align="center">Condition</th>
<th align="right">Decision</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">LR<sub>m</sub> â‰¤ B</td>
<td align="right">accept H<sub>0</sub> and reject H<sub>1</sub>
</td>
</tr>
<tr class="even">
<td align="center">B &lt; LR<sub>m</sub> &lt; A</td>
<td align="right">continue sampling</td>
</tr>
<tr class="odd">
<td align="center">LR<sub>m</sub> â‰¤ A</td>
<td align="right">accept H<sub>1</sub> and reject H<sub>0</sub>
</td>
</tr>
</tbody>
</table>
<p>The A and B boundaries are calculated with the previously defined error rates ğ›¼ (Type I error) and ğ›½ (Type II error) as follows:</p>
<p><span class="math display">\[
A = \left( \frac{1 - ğ›½}{ğ›¼} \right) \\
B = \left( \frac{ğ›½}{1 - ğ›¼} \right).
\]</span></p>
<p>In summary, three specifications are required to calculate a sequential t-test:</p>
<ul>
<li><p>the ğ›¼ error probability (usually 0.05 or less),</p></li>
<li><p>the ğ›½ error probability (usually .20 or less), and</p></li>
<li><p>CohenÂ´s d (either as the expected effect size or as the lower limit for a substantial effect).</p></li>
</ul>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-hajnal1961">
<p>Hajnal, J. (1961). A two-sample sequential t-test. <em>Biometrika</em>, <em>48</em>(1/2), 65. <a href="https://doi.org/10.2307/2333131">https://doi.org/10.2307/2333131</a></p>
</div>
<div id="ref-rushton1950a">
<p>Rushton, S. (1950). On a sequential t-test. <em>Biometrika</em>, <em>37</em>(3/4), 326. <a href="https://doi.org/10.2307/2332385">https://doi.org/10.2307/2332385</a></p>
</div>
<div id="ref-rushton1952">
<p>Rushton, S. (1952). On a two-sided sequential t-test. <em>Biometrika</em>, <em>39</em>(3/4), 302. <a href="https://doi.org/10.2307/2334026">https://doi.org/10.2307/2334026</a></p>
</div>
<div id="ref-schnuerch2020a">
<p>Schnuerch, M., &amp; Erdfelder, E. (2020). Controlling decision errors with minimal costs: The sequential probability ratio t test. <em>Psychological Methods</em>, <em>25</em>(2), 206â€“226. <a href="https://doi.org/10.1037/met0000234">https://doi.org/10.1037/met0000234</a></p>
</div>
<div id="ref-stefan2020">
<p>Stefan, A., SchÃ¶nbrodt, F., Evans, N., &amp; Wagenmakers, E. (2020). <em>Efficiency in sequential testing: Comparing the sequential probability ratio test and the sequential bayes factor test</em>. <a href="http://dx.doi.org/10.31234/osf.io/ry4fw">http://dx.doi.org/10.31234/osf.io/ry4fw</a></p>
</div>
<div id="ref-wald1947">
<p>Wald, A. (1947). Sequential analysis,â€– john wiley &amp; sons. <em>New York, NY</em>.</p>
</div>
<div id="ref-wald1945a">
<p>Wald, A. (1945). Sequential tests of statistical hypotheses. <em>The Annals of Mathematical Statistics</em>, <em>16</em>(2), 117â€“186. <a href="https://doi.org/10.1214/aoms/1177731118">https://doi.org/10.1214/aoms/1177731118</a></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Meike Steinhilber, Martin Schnuerch, Anna-Lena Schubert.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
